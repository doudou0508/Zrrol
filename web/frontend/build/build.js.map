{"version":3,"sources":["../../node_modules/browser-pack/_prelude.js","js/ajax.js","js/chart.js","js/indicatorSettings.js","js/main.js"],"names":[],"mappings":"AAAA;;;ACAA;;AAEA,OAAO,OAAP,CAAe,GAAf,GAAqB,CAAC,GAAD,EAAM,QAAN,EAAgB,CAAhB,KAAsB;AACzC,MAAI;AACF,QAAI,KAAI,MAAK,cAAL,IAAuB,aAA3B,EAA0C,oBAA1C,CAAJ;AACA,MAAE,IAAF,CAAO,KAAP,EAAc,GAAd,EAAmB,CAAnB;AACA,MAAE,gBAAF,CAAmB,kBAAnB,EAAuC,gBAAvC;AACA,MAAE,gBAAF,CAAmB,cAAnB,EAAmC,mCAAnC;AACA,MAAE,kBAAF,GAAuB,YAAY;AACjC,QAAE,UAAF,GAAe,CAAf,IAAoB,QAApB,IAAgC,SAAS,EAAE,YAAX,EAAyB,CAAzB,CAAhC;AACD,KAFD;AAGA,MAAE,IAAF,CAAO,IAAP;AACD,GATD,CASE,OAAO,CAAP,EAAU;AACV,WAAO,OAAP,IAAkB,QAAQ,GAAR,CAAY,CAAZ,CAAlB;AACD;AACF,CAbD;;AAeA,OAAO,OAAP,CAAe,IAAf,GAAsB,CAAC,GAAD,EAAM,QAAN,EAAgB,IAAhB,EAAsB,CAAtB,KAA4B;AAChD,MAAI,MAAM,IAAI,cAAJ,EAAV;AACA,MAAI,IAAJ,CAAS,MAAT,EAAiB,GAAjB,EAAsB,IAAtB;AACA,MAAI,gBAAJ,CAAqB,cAArB,EAAqC,kBAArC;AACA,MAAI,kBAAJ,GAAyB,YAAY;AACjC,QAAI,IAAI,UAAJ,IAAkB,CAAlB,IAAuB,IAAI,MAAJ,IAAc,GAAzC,EAA8C;AAC1C,UAAI,OAAO,KAAK,KAAL,CAAW,IAAI,YAAf,CAAX;AACA,eAAS,IAAT;AACH;AACJ,GALD;AAMA,MAAI,OAAO,KAAK,SAAL,CAAe,IAAf,CAAX;AACA,MAAI,IAAJ,CAAS,IAAT;AACD,CAZD;;AAeA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AC1CA,OAAO,OAAP,GAAiB,UAAS,IAAT,EAAe,MAAf,EAAuB;;AAEpC,QAAI,SAAS,EAAC,KAAK,EAAN,EAAU,OAAO,EAAjB,EAAqB,QAAQ,EAA7B,EAAiC,MAAM,EAAvC,EAAb;AAAA,QACI,QAAQ,OAAO,UAAP,GAAoB,OAAO,IAA3B,GAAkC,OAAO,KADrD;AAAA,QAEI,SAAS,MAAM,OAAO,GAAb,GAAmB,OAAO,MAFvC;;AAIA,QAAI,IAAI,OAAO,KAAP,CAAa,WAAb,GACH,KADG,CACG,CAAC,CAAD,EAAI,KAAJ,CADH,CAAR;;AAGA,QAAI,IAAI,GAAG,WAAH,GACH,KADG,CACG,CAAC,MAAD,EAAS,CAAT,CADH,CAAR;;AAGA,QAAI,OAAO,GAAG,IAAH,GACN,EADM,CACH,MADG,EACK,MADL,CAAX;;AAGA,QAAI,YAAJ;;AAEA,QAAI,cAAc,OAAO,IAAP,CAAY,WAAZ,GACb,MADa,CACN,CADM,EAEb,MAFa,CAEN,CAFM,CAAlB;;AAIA,QAAI,aAAa,OAAO,IAAP,CAAY,UAAZ,GACZ,MADY,CACL,CADK,EAEZ,MAFY,CAEL,CAFK,EAGZ,MAHY,CAGL,UAAS,CAAT,EAAY;AAAE,eAAO,EAAE,MAAF,CAAS,UAAT,CAAoB,KAApB,IAA6B,IAA7B,GAAoC,MAA3C;AAAoD,KAH7D,EAIZ,EAJY,CAIT,YAJS,EAIK,KAJL,EAKZ,EALY,CAKT,UALS,EAKG,GALH,CAAjB;;AAOA,QAAI,QAAQ,GAAG,UAAH,CAAc,CAAd,CAAZ;;AAEA,QAAI,QAAQ,GAAG,QAAH,CAAY,CAAZ,CAAZ;;AAEA,QAAI,MAAM,GAAG,MAAH,CAAU,MAAV,EAAkB,MAAlB,CAAyB,KAAzB,EACL,IADK,CACA,OADA,EACS,QAAQ,OAAO,IAAf,GAAsB,OAAO,KADtC,EAEL,IAFK,CAEA,QAFA,EAEU,SAAS,OAAO,GAAhB,GAAsB,OAAO,MAFvC,EAGL,MAHK,CAGE,GAHF,EAID,IAJC,CAII,WAJJ,EAIiB,eAAe,OAAO,IAAtB,GAA6B,GAA7B,GAAmC,OAAO,GAA1C,GAAgD,GAJjE,CAAV;;AAMA,QAAI,YAAY,IAAI,MAAJ,CAAW,MAAX,EACX,KADW,CACL,aADK,EACU,KADV,EAEX,IAFW,CAEN,OAFM,EAEG,QAFH,EAGX,IAHW,CAGN,GAHM,EAGD,QAAQ,CAHP,EAIX,IAJW,CAIN,GAJM,EAID,EAJC,CAAhB;;AAMA,QAAI,MAAJ,CAAW,UAAX,EACS,IADT,CACc,IADd,EACoB,MADpB,EAEK,MAFL,CAEY,MAFZ,EAGS,IAHT,CAGc,GAHd,EAGmB,CAHnB,EAIS,IAJT,CAIc,GAJd,EAImB,EAAE,CAAF,CAJnB,EAKS,IALT,CAKc,OALd,EAKuB,KALvB,EAMS,IANT,CAMc,QANd,EAMwB,EAAE,CAAF,IAAO,EAAE,CAAF,CAN/B;;AAQA,QAAI,MAAJ,CAAW,GAAX,EACS,IADT,CACc,OADd,EACuB,aADvB,EAES,IAFT,CAEc,WAFd,EAE2B,YAF3B;;AAIA,QAAI,MAAJ,CAAW,GAAX,EACS,IADT,CACc,OADd,EACuB,YADvB;;AAGA,QAAI,MAAJ,CAAW,GAAX,EACS,IADT,CACc,OADd,EACuB,QADvB,EAES,IAFT,CAEc,WAFd,EAE2B,iBAAiB,MAAjB,GAA0B,GAFrD;;AAIA,QAAI,MAAJ,CAAW,GAAX,EACS,IADT,CACc,OADd,EACuB,QADvB,EAEK,MAFL,CAEY,MAFZ,EAGS,IAHT,CAGc,WAHd,EAG2B,aAH3B,EAIS,IAJT,CAIc,GAJd,EAImB,CAJnB,EAKS,IALT,CAKc,IALd,EAKoB,OALpB,EAMS,KANT,CAMe,aANf,EAM8B,KAN9B,EAOS,IAPT,CAOc,WAPd;;AASA,QAAI,MAAJ,CAAW,MAAX,EACS,IADT,CACc,OADd,EACuB,MADvB,EAES,IAFT,CAEc,OAFd,EAEuB,KAFvB,EAGS,IAHT,CAGc,QAHd,EAGwB,MAHxB,EAIS,IAJT,CAIc,IAJd;;AAMA,QAAI,WAAW,YAAY,QAAZ,EAAf;;AAEA,WAAO,KAAK,GAAL,CAAS,UAAS,CAAT,EAAY;AACxB,eAAO;AACH,kBAAM,OAAO,EAAE,KAAT,EAAgB,MAAhB,EADH;AAEH,kBAAM,CAAC,EAAE,IAFN;AAGH,kBAAM,CAAC,EAAE,IAHN;AAIH,iBAAK,CAAC,EAAE,GAJL;AAKH,mBAAO,CAAC,EAAE,KALP;AAMH,oBAAQ,CAAC,EAAE;AANR,SAAP;AAQH,KATM,EASJ,IATI,CASC,UAAS,CAAT,EAAY,CAAZ,EAAe;AAAE,eAAO,GAAG,SAAH,CAAa,SAAS,CAAT,CAAW,CAAX,CAAb,EAA4B,SAAS,CAAT,CAAW,CAAX,CAA5B,CAAP;AAAoD,KATtE,CAAP;;AAWA,MAAE,MAAF,CAAS,KAAK,GAAL,CAAS,SAAS,CAAlB,CAAT;AACA,MAAE,MAAF,CAAS,OAAO,KAAP,CAAa,IAAb,CAAkB,IAAlB,CAAuB,IAAvB,EAA6B,QAA7B,EAAuC,MAAvC,EAAT;;AAEA,QAAI,MAAJ,CAAW,eAAX,EAA4B,KAA5B,CAAkC,IAAlC;AACA;;AAEA;AACA;AACA,mBAAe,EAAE,QAAF,GAAa,KAAb,CAAmB,KAAnB,EAA0B,IAA1B,EAAf;;AAEA,aAAS,MAAT,GAAkB;AACd,YAAI,YAAY,GAAG,KAAH,CAAS,SAAT,CAAmB,QAAnB,CAA4B,CAA5B,CAAhB;AACA,cAAM,KAAN,CAAY,SAAZ;AACA,oBAAY,MAAZ,CAAmB,SAAnB;AACA,mBAAW,MAAX,CAAkB,SAAlB;;AAEA;AACA,UAAE,QAAF,GAAa,MAAb,CAAoB,GAAG,KAAH,CAAS,SAAT,CAAmB,QAAnB,CAA4B,YAA5B,EAA0C,MAA1C,EAApB;;AAEA;AACH;;AAED,aAAS,IAAT,GAAgB;AACZ,YAAI,MAAJ,CAAW,eAAX,EAA4B,IAA5B,CAAiC,WAAjC;AACA;AACA;AACA;AACA,YAAI,SAAJ,CAAc,cAAd,EAA8B,KAA9B,CAAoC,MAApC,EAA4C,IAA5C,CAAiD,UAAjD;;AAEA,YAAI,MAAJ,CAAW,UAAX,EAAuB,IAAvB,CAA4B,KAA5B;AACA,YAAI,MAAJ,CAAW,UAAX,EAAuB,IAAvB,CAA4B,KAA5B;AACH;;AAED,aAAS,KAAT,CAAe,CAAf,EAAkB;AACd,kBAAU,KAAV,CAAgB,SAAhB,EAA2B,QAA3B;AACA,oBAAY,CAAZ;AACH;;AAED,aAAS,GAAT,GAAe;AACX,kBAAU,KAAV,CAAgB,SAAhB,EAA2B,MAA3B;AACH;;AAED,aAAS,WAAT,CAAqB,CAArB,EAAwB;AACpB,kBAAU,IAAV,CAAe,YAAY,WAAW,EAAE,IAAb,CAAZ,GAAiC,IAAjC,GAAwC,EAAE,IAA1C,GAAiD,IAAjD,GAAwD,EAAE,KAAF,CAAQ,OAAR,CAAgB,EAAhB,CAAvE;AACH;;AAED,aAAS,EAAE,GAAF,CAAM,MAAN,EAAc,UAAS,CAAT,EAAY;AAC/B,UAAE,IAAF,GAAS,OAAO,EAAE,IAAT,EAAe,MAAf,EAAT;AACA,UAAE,IAAF,GAAS,EAAE,MAAX;AACA,UAAE,QAAF,GAAa,EAAE,OAAf;AACA,eAAO,CAAP;AACH,KALQ,CAAT;;AAOA,SAAK,IAAL,EAAW,MAAX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAKA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAIH,CA/ND;;;ACAA,IAAI,SAAS,EAAb;;AAEA;AACA,OAAO,IAAP,GAAc;AACZ;AACA;AACA,SAAO,EAHK;AAIZ,QAAM,EAJM;AAKZ;AACA;AACA,cAAY;AACV,UAAM,CAAC,KADG;AAEV,QAAI;AAFM;AAPA,CAAd;;AAaA;AACA,OAAO,IAAP,GAAc;AACZ;AACA;AACA,SAAO,EAHK;AAIZ,QAAM,EAJM;AAKZ,UAAQ,CALI;AAMZ;AACA,cAAY;AACV,UAAM,CAAC,GADG;AAEV,QAAI,GAFM;AAGV;AACA;AACA,iBAAa;AALH;AAPA,CAAd;;AAgBA;AACA,OAAO,GAAP,GAAa;AACX;AACA;AACA,SAAO,EAHI;AAIX,QAAM,EAJK;AAKX,UAAQ,CALG;AAMX;AACA,cAAY;AACV,UAAM,CAAC,KADG;AAEV,QAAI,KAFM;AAGV;AACA;AACA,iBAAa;AALH;AAPD,CAAb;;AAgBA;AACA;AACA,OAAO,MAAP,GAAgB;AACd,YAAU,KADI,EACG;AACjB,cAAY;AACV;AACA,eAAW,GAFD;AAGV,gBAAY,CAAC,GAHH;AAIV;AACA;AACA,iBAAa;AANH;AAFE,CAAhB;;AAYA;AACA,OAAO,GAAP,GAAa;AACX,YAAU,EADC;AAEX,cAAY;AACV,SAAK,EADK;AAEV,UAAM,EAFI;AAGV;AACA;AACA,iBAAa;AALH;AAFD,CAAb;;AAWA;AACA,OAAO,GAAP,GAAa;AACX,SAAO,EADI;AAEX,QAAM,EAFK;AAGX,cAAY;AACV,SAAK,CAAC,EADI;AAEV,UAAM,EAFI;AAGV;AACA;AACA,iBAAa;AALH;AAHD,CAAb;;AAYA;AACA,OAAO,EAAP,GAAY;AACV,SAAO,EAAC,QAAQ,CAAT,EAAY,QAAQ,CAApB,EADG;AAEV,UAAQ,EAAC,QAAQ,CAAT,EAAY,QAAQ,EAApB,EAFE;AAGV,SAAO,EAAC,QAAQ,CAAT,EAAY,QAAQ,EAApB,EAHG;AAIV,cAAY;AACV,SAAK,EADK;AAEV,UAAM,EAFI;AAGV;AACA;AACA,iBAAa;AALH;AAJF,CAAZ;;AAaA;AACA,OAAO,GAAP,GAAa;AACT,YAAU,KADD,EACQ;AACjB,WAAS,EAFA,EAEI;AACb,cAAY;AACR,QAAI,GADI,EACC;AACT,UAAM,CAAC,GAFC,EAEI;AACZ,iBAAa,CAHL,CAGO;AAHP;AAHH,CAAb;;AAUA;AACA,OAAO,QAAP,GAAkB;AAChB,YAAU,CADM;AAEhB,cAAY;AACV,SAAK,EADK;AAEV,UAAM,EAFI;AAGV;AACA;AACA,iBAAa;AALH;AAFI,CAAlB;;AAYA;AACA,OAAO,MAAP,GAAgB;AACd,qBAAmB;AADL,CAAhB;;AAIA,OAAO,YAAP,IAAuB;AACrB,cAAY;AACV,qBAAiB,EADP;AAEV,qBAAiB,EAFP;AAGV,uBAAmB;AAHT,GADS;AAMrB,cAAY;AACV,UAAM,CAAC,KADG;AAEV,QAAI;AAFM;AANS,CAAvB;;AAYA,OAAO,OAAP,GAAiB,MAAjB;;;AChJA,IAAI,OAAO,QAAQ,QAAR,EAAkB,IAA7B;AACA,IAAI,QAAQ,QAAQ,SAAR,CAAZ;AACA;AACA;AACA,IAAI,oBAAoB,QAAQ,qBAAR,CAAxB;;AAEA,IAAI,MAAM,KAAK,OAAO,IAAP,CAAY,CAAZ,EAAe,GAAf,GAAqB,MAArB,CAA4B,qBAA5B,CAAf;;AAEA,IAAI,YAAY,SAAS,cAAT,CAAwB,UAAxB,CAAhB;AACA,UAAU,OAAV,GAAoB,MAAM;AACxB,IAAE,KAAF,EAAS,MAAT;;AAEA,MAAI,UAAU;AACZ,WAAO;AACL,gBAAU,EAAE,WAAF,EAAe,GAAf,EADL;AAEL,gBAAU,EAAE,WAAF,EAAe,GAAf,EAFL;AAGL,aAAO,EAAE,QAAF,EAAY,GAAZ;AAHF;AADK,GAAd;;AAQA,MAAI,SAAS,UAAU;AACrB;AACA;AACA;AACA;;AAEA,QAAI,IAAI,8BAAR;AACA,MAAE,IAAF,CAAO,MAAP,EAAe,CAAC,CAAD,EAAI,CAAJ,KAAU;AACvB,WAAK,aAAa,IAAI,CAAjB,IAAsB,IAA3B;AACA,WAAK,YAAY,IAAI,EAAE,IAAN,CAAZ,GAA0B,IAA/B;AACA,WAAK,UAAU,IAAI,EAAE,EAAN,CAAV,GAAsB,IAA3B;AACD,KAJD;;AAMA,QAAI,QAAQ,SAAS,OAAO,CAAP,CAAT,IAAsB,CAAlC;;AAEA,QAAI,YAAY;AACd,YAAM,IAAI,OAAO,KAAP,EAAc,IAAlB,CADQ;AAEd,UAAI,IAAI,OAAO,KAAP,EAAc,EAAlB;AAFU,KAAhB;;AAKA,QAAI,UAAU,EAAE,KAAF,CAAQ;AACpB,sBAAgB;AACd,iBAAS,IADK;AAEd,gBAAQ,EAAE,QAAF,EAAY,GAAZ,EAFM;AAGd,oBAAY,CAAC,EAAE,aAAF,EAAiB,GAAjB,EAHC;AAId,qBAAa,CAAC,EAAE,cAAF,EAAkB,GAAlB,EAJA;AAKd,eAAO;AACL,mBAAS,EAAE,QAAF,EAAY,GAAZ,OAAsB,MAD1B;AAEL,mBAAS;AAFJ;AALO,OADI;AAWpB,aAAO;AACL,kBAAU,EAAE,WAAF,EAAe,GAAf,EADL;AAEL,kBAAU,EAAE,WAAF,EAAe,GAAf,EAFL;AAGL,eAAO,EAAE,QAAF,EAAY,GAAZ;AAHF,OAXa;AAgBpB,gBAAU;AACR,mBAAW;AADH;AAhBU,KAAR,EAmBX,iBAnBW,CAAd;;AAqBA,MAAE,MAAF,EAAU,IAAV,CAAe,kBAAf;AACA,YAAQ,GAAR,CAAY,gBAAZ,EAA8B,OAA9B;AACA,SAAK,eAAL,EAAsB,UAAS,IAAT,EAAe;AACnC,cAAQ,GAAR,CAAY,IAAZ;AACA,QAAE,MAAF,EAAU,IAAV,CAAe,OAAf;AACA,YAAM,KAAK,OAAX,EAAoB,KAAK,MAAzB;AACD,KAJD,EAIG,OAJH;AAMD,GAjDD;;AAmDA,IAAE,MAAF,EAAU,IAAV,CAAe,0BAAf;AACA,OAAK,WAAL,EAAkB,MAAlB,EAA0B,OAA1B;AACD,CAhED","file":"build.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// https://gist.github.com/Xeoncross/7663273\n\nmodule.exports.get = (url, callback, x) => {\n  try {\n    x = new(this.XMLHttpRequest || ActiveXObject)('MSXML2.XMLHTTP.3.0');\n    x.open('GET', url, 1);\n    x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    x.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n    x.onreadystatechange = function () {\n      x.readyState > 3 && callback && callback(x.responseText, x);\n    };\n    x.send(data)\n  } catch (e) {\n    window.console && console.log(e);\n  }\n}\n\nmodule.exports.post = (url, callback, data, x) => {\n  var xhr = new XMLHttpRequest();\n  xhr.open(\"POST\", url, true);\n  xhr.setRequestHeader(\"Content-type\", \"application/json\");\n  xhr.onreadystatechange = function () { \n      if (xhr.readyState == 4 && xhr.status == 200) {\n          var json = JSON.parse(xhr.responseText);\n          callback(json);\n      }\n  }\n  var data = JSON.stringify(data);\n  xhr.send(data);\n};\n\n\n// https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n// https://gist.github.com/jed/993585\n// https://gist.github.com/Fluidbyte/5082377\n// https://github.com/Xeoncross/kb_javascript_framework/blob/master/kB.js#L30\n// https://gist.github.com/iwek/5599777\n// http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#_id\n\n// @todo look into lengthComputable for xhr.upload browsers\n// http://stackoverflow.com/questions/11127654/why-is-progressevent-lengthcomputable-false\n// http://stackoverflow.com/questions/10956574/why-might-xmlhttprequest-progressevent-lengthcomputable-be-false\n// https://github.com/ForbesLindesay/ajax/blob/master/index.js","module.exports = function(data, trades) {\n\n    var margin = {top: 20, right: 20, bottom: 30, left: 50},\n        width = window.innerWidth - margin.left - margin.right,\n        height = 500 - margin.top - margin.bottom;\n\n    var x = techan.scale.financetime()\n        .range([0, width]);\n\n    var y = d3.scaleLinear()\n        .range([height, 0]);\n\n    var zoom = d3.zoom()\n        .on(\"zoom\", zoomed);\n\n    var zoomableInit;\n\n    var candlestick = techan.plot.candlestick()\n        .xScale(x)\n        .yScale(y);\n\n    var tradearrow = techan.plot.tradearrow()\n        .xScale(x)\n        .yScale(y)\n        .orient(function(d) { return d.action.startsWith(\"buy\") ? \"up\" : \"down\"; })\n        .on(\"mouseenter\", enter)\n        .on(\"mouseout\", out);\n\n    var xAxis = d3.axisBottom(x);\n\n    var yAxis = d3.axisLeft(y);\n\n    var svg = d3.select(\"body\").append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n        .append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    var valueText = svg.append('text')\n        .style(\"text-anchor\", \"end\")\n        .attr(\"class\", \"coords\")\n        .attr(\"x\", width - 5)\n        .attr(\"y\", 15);\n\n    svg.append(\"clipPath\")\n            .attr(\"id\", \"clip\")\n        .append(\"rect\")\n            .attr(\"x\", 0)\n            .attr(\"y\", y(1))\n            .attr(\"width\", width)\n            .attr(\"height\", y(0) - y(1));\n\n    svg.append(\"g\")\n            .attr(\"class\", \"candlestick\")\n            .attr(\"clip-path\", \"url(#clip)\");\n\n    svg.append(\"g\")\n            .attr(\"class\", \"tradearrow\");\n\n    svg.append(\"g\")\n            .attr(\"class\", \"x axis\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\");\n\n    svg.append(\"g\")\n            .attr(\"class\", \"y axis\")\n        .append(\"text\")\n            .attr(\"transform\", \"rotate(-90)\")\n            .attr(\"y\", 6)\n            .attr(\"dy\", \".71em\")\n            .style(\"text-anchor\", \"end\")\n            .text(\"Price ($)\");\n\n    svg.append(\"rect\")\n            .attr(\"class\", \"pane\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n            .call(zoom);\n\n    var accessor = candlestick.accessor();\n\n    data = data.map(function(d) {\n        return {\n            date: moment(d.start).toDate(),\n            open: +d.open,\n            high: +d.high,\n            low: +d.low,\n            close: +d.close,\n            volume: +d.volume\n        };\n    }).sort(function(a, b) { return d3.ascending(accessor.d(a), accessor.d(b)); });\n\n    x.domain(data.map(accessor.d));\n    y.domain(techan.scale.plot.ohlc(data, accessor).domain());\n\n    svg.select(\"g.candlestick\").datum(data);\n    draw();\n\n    // Associate the zoom with the scale after a domain has been applied\n    // Stash initial settings to store as baseline for zooming\n    zoomableInit = x.zoomable().clamp(false).copy();\n\n    function zoomed() {\n        var rescaledY = d3.event.transform.rescaleY(y);\n        yAxis.scale(rescaledY);\n        candlestick.yScale(rescaledY);\n        tradearrow.yScale(rescaledY);\n\n        // Emulates D3 behaviour, required for financetime due to secondary zoomable scale\n        x.zoomable().domain(d3.event.transform.rescaleX(zoomableInit).domain());\n\n        draw();\n    }\n\n    function draw() {\n        svg.select(\"g.candlestick\").call(candlestick);\n        // using refresh method is more efficient as it does not perform any data joins\n        // Use this if underlying data is not changing\n        // svg.select(\"g.candlestick\").call(candlestick.refresh);\n        svg.selectAll(\"g.tradearrow\").datum(trades).call(tradearrow);\n\n        svg.select(\"g.x.axis\").call(xAxis);\n        svg.select(\"g.y.axis\").call(yAxis)\n    }\n\n    function enter(d) {\n        valueText.style(\"display\", \"inline\");\n        refreshText(d);\n    }\n\n    function out() {\n        valueText.style(\"display\", \"none\");\n    }\n\n    function refreshText(d) {\n        valueText.text(\"Trade: \" + dateFormat(d.date) + \", \" + d.type + \", \" + d.price.toFixed(12));\n    }\n\n    trades = _.map(trades, function(t) {\n        t.date = moment(t.date).toDate();\n        t.type = t.action;\n        t.quantity = t.balance;\n        return t;\n    });\n\n    draw(data, trades);\n\n    // //////////\n    // //////////\n    // //////////\n    // //////////\n    // //////////\n    // //////////\n    // //////////\n    // //////////\n    // //////////\n    // //////////\n    // //////////\n    // //////////\n    // //////////\n    // //////////\n\n\n\n\n    // var accessor = candlestick.accessor();\n\n    // data = data.map(function(d) {\n    //     return {\n    //         date: moment(d.start).toDate(),\n    //         open: +d.open,\n    //         high: +d.high,\n    //         low: +d.low,\n    //         close: +d.close,\n    //         volume: +d.volume\n    //     };\n    // }).sort(function(a, b) { return d3.ascending(accessor.d(a), accessor.d(b)); });\n\n    // var trades = [\n    //     { date: data[67].date, type: \"buy\", price: data[67].low, quantity: 1000 },\n    //     { date: data[100].date, type: \"sell\", price: data[100].high, quantity: 200 },\n    //     { date: data[156].date, type: \"buy\", price: data[156].open, quantity: 500 },\n    //     { date: data[167].date, type: \"sell\", price: data[167].close, quantity: 300 },\n    //     { date: data[187].date, type: \"buy-pending\", price: data[187].low, quantity: 300 }\n    // ];\n\n    // svg.append(\"g\")\n    //         .attr(\"class\", \"candlestick\");\n\n    // svg.append(\"g\")\n    //         .attr(\"class\", \"tradearrow\");\n\n    // svg.append(\"g\")\n    //         .attr(\"class\", \"x axis\")\n    //         .attr(\"transform\", \"translate(0,\" + height + \")\");\n\n    // svg.append(\"g\")\n    //         .attr(\"class\", \"y axis\")\n    //         .append(\"text\")\n    //         .attr(\"transform\", \"rotate(-90)\")\n    //         .attr(\"y\", 6)\n    //         .attr(\"dy\", \".71em\")\n    //         .style(\"text-anchor\", \"end\")\n    //         .text(\"Price (\" + $('#currency').val()  + \")\");\n\n    // draw(data, trades);\n\n    // function draw(data, trades) {\n        \n    //     console.log(trades);\n\n    //     x.domain(data.map(candlestick.accessor().d));\n    //     y.domain(techan.scale.plot.ohlc(data, candlestick.accessor()).domain());\n\n    //     svg.selectAll(\"g.candlestick\").datum(data).call(candlestick);\n\n    //     svg.selectAll(\"g.tradearrow\").datum(trades).call(tradearrow);\n\n    //     svg.selectAll(\"g.x.axis\").call(xAxis);\n    //     svg.selectAll(\"g.y.axis\").call(yAxis);\n    // }\n\n    \n\n};","var config = {};\n\n// Exponential Moving Averages settings:\nconfig.DEMA = {\n  // EMA weight (α)\n  // the higher the weight, the more smooth (and delayed) the line\n  short: 10,\n  long: 21,\n  // amount of candles to remember and base initial EMAs on\n  // the difference between the EMAs (to act as triggers)\n  thresholds: {\n    down: -0.025,\n    up: 0.025\n  }\n};\n\n// MACD settings:\nconfig.MACD = {\n  // EMA weight (α)\n  // the higher the weight, the more smooth (and delayed) the line\n  short: 10,\n  long: 21,\n  signal: 9,\n  // the difference between the EMAs (to act as triggers)\n  thresholds: {\n    down: -2.2,\n    up: 2.2,\n    // How many candle intervals should a trend persist\n    // before we consider it real?\n    persistence: 1\n  }\n};\n\n// PPO settings:\nconfig.PPO = {\n  // EMA weight (α)\n  // the higher the weight, the more smooth (and delayed) the line\n  short: 12,\n  long: 26,\n  signal: 9,\n  // the difference between the EMAs (to act as triggers)\n  thresholds: {\n    down: -0.025,\n    up: 0.025,\n    // How many candle intervals should a trend persist\n    // before we consider it real?\n    persistence: 2\n  }\n};\n\n// Uses one of the momentum indicators but adjusts the thresholds when PPO is bullish or bearish\n// Uses settings from the ppo and momentum indicator config block\nconfig.varPPO = {\n  momentum: 'TSI', // RSI, TSI or UO\n  thresholds: {\n    // new threshold is default threshold + PPOhist * PPOweight\n    weightLow: 120,\n    weightHigh: -120,\n    // How many candle intervals should a trend persist\n    // before we consider it real?\n    persistence: 0\n  }\n};\n\n// RSI settings:\nconfig.RSI = {\n  interval: 14,\n  thresholds: {\n    low: 30,\n    high: 70,\n    // How many candle intervals should a trend persist\n    // before we consider it real?\n    persistence: 1\n  }\n};\n\n// TSI settings:\nconfig.TSI = {\n  short: 13,\n  long: 25,\n  thresholds: {\n    low: -25,\n    high: 25,\n    // How many candle intervals should a trend persist\n    // before we consider it real?\n    persistence: 1\n  }\n};\n\n// Ultimate Oscillator Settings\nconfig.UO = {\n  first: {weight: 4, period: 7},\n  second: {weight: 2, period: 14},\n  third: {weight: 1, period: 28},\n  thresholds: {\n    low: 30,\n    high: 70,\n    // How many candle intervals should a trend persist\n    // before we consider it real?\n    persistence: 1\n  }\n};\n\n// CCI Settings\nconfig.CCI = {\n    constant: 0.015, // constant multiplier. 0.015 gets to around 70% fit\n    history: 90, // history size, make same or smaller than history\n    thresholds: {\n        up: 100, // fixed values for overbuy upward trajectory\n        down: -100, // fixed value for downward trajectory\n        persistence: 0 // filter spikes by adding extra filters candles\n    }\n};\n\n// StochRSI settings\nconfig.StochRSI = {\n  interval: 3,\n  thresholds: {\n    low: 20,\n    high: 80,\n    // How many candle intervals should a trend persist\n    // before we consider it real?\n    persistence: 3\n  }\n};\n\n\n// custom settings:\nconfig.custom = {\n  my_custom_setting: 10,\n}\n\nconfig['talib-macd'] = {\n  parameters: {\n    optInFastPeriod: 10,\n    optInSlowPeriod: 21,\n    optInSignalPeriod: 9\n  },\n  thresholds: {\n    down: -0.025,\n    up: 0.025,\n  }\n}\n\nmodule.exports = config;","var post = require('./ajax').post;\nvar chart = require('./chart');\n// todo!\n// var exchages = require('../../../exchanges');\nvar indicatorSettings = require('./indicatorSettings');\n\nvar fmt = u => moment.unix(u).utc().format('YYYY-MM-DD HH:mm:ss');\n\nvar $backtest = document.getElementById('backtest');\n$backtest.onclick = () => {\n  $('svg').remove();\n\n  var request = {\n    watch: {\n      exchange: $('#exchange').val(),\n      currency: $('#currency').val(),\n      asset: $('#asset').val()\n    }\n  }\n\n  var handle = ranges => {\n    // var ranges = JSON.parse(data);\n    // if(_.size(ranges) === 1) {\n    //   daterange = _.first(ranges);\n    // }\n\n    var q = 'what range would you like?\\n';\n    _.each(ranges, (r, i) => {\n      q += 'OPTION ' + (i + 1) + '\\n';\n      q += '\\tfrom ' + fmt(r.from) + '\\n';\n      q += '\\tto ' + fmt(r.to) + '\\n';\n    });\n\n    var index = parseInt(prompt(q)) - 1;\n    \n    var daterange = {\n      from: fmt(ranges[index].from),\n      to: fmt(ranges[index].to)\n    }\n\n    var request = _.merge({\n      tradingAdvisor: {\n        enabled: true,\n        method: $('#strat').val(),\n        candleSize: +$('#candleSize').val(),\n        historySize: +$('#historySize').val(),\n        talib: {\n          enabled: $('#talib').val() === 'true',\n          version: '1.0.2'\n        }\n      },\n      watch: {\n        exchange: $('#exchange').val(),\n        currency: $('#currency').val(),\n        asset: $('#asset').val()\n      },\n      backtest: {\n        daterange: daterange\n      }\n    }, indicatorSettings);\n\n    $('#log').text('running backtest');\n    console.log('backtesting...', request);\n    post('/api/backtest', function(data) {\n      console.log(data);\n      $('#log').text('done!');\n      chart(data.candles, data.trades);\n    }, request);\n\n  }\n\n  $('#log').text('checking available data.');\n  post('/api/scan', handle, request);\n}\n\n"]}